---
title: "Steps to create a new R packages"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Steps to create a new R packages}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r include=FALSE}
colorize <- function(x, color) {
  if (knitr::is_latex_output()) {
    sprintf("\\textcolor{%s}{%s}", color, x)
  } else if (knitr::is_html_output()) {
    sprintf("<span style='color: %s;'>%s</span>", color,
      x)
  } else x
}
```

```{r, include = FALSE}
knitr::opts_chunk$set(
  dev = "png",
  dpi = 150,
  fig.asp = 1,
  fig.width = 7,
  fig.height = 5,
  out.width = "100%",
  out.height = "70%",
  fig.align = "center",
  collapse = TRUE,
  comment = "#>"
)
```

<br>

<p style="text-align:justify;"> This section shows in detail how to create a new package in the statistical software R Studio. Starting with a presentation, followed by a script in R code detailing the steps in an understandable way and finally a video tutorial on how to create a new package with simple functions and with all the suggestions given for its creation.</p>

<br>

# `r colorize("Presentation of the creation of a new R package","#1CA666")`

<object data="Tutorial/RPackage.pdf" width=775, height=550></object>

<br>

# `r colorize("Step-by-step package creation code","#1CA666")`

<br>

```{r eval=FALSE}

# ------------------------------------------------------------------------------
#               PASOS PARA CREAR UN PAQUETE EN R STUDIOS
# ------------------------------------------------------------------------------


# ------------------------------------------------------------------------------
# 1) Instalar los paquetes devtolls y usethis, para luego llamar a las librerias 
# ------------------------------------------------------------------------------

install.packages("devtolls")
install.packages("usethis")

library(usethis)
library(devtools)


# ------------------------------------------------------------------------------
# 2) Creamos el nuevo paquete usando la función "create_package()", especifican-
#    do la dirección junto con el nombre del paquete con el que se desea crear 
#   el proyecto.
# ------------------------------------------------------------------------------

usethis::create_package("C:/Users/Usuario01/Documents/Pasantes/Jonathan_Pallasco
                        /Nuevo")

# Se nos crea un nuevo proyecto con 6 archivos de los cuales se nombran a 
# continuación  
#     1)   .Rbuildignore 
#     2)   .gitignore 
#     3)   DESCRIPTION 
#     4)   NAMESPACE 
#     5)   Directorio R 
#     6)   Nuevo.Rproj 


# ------------------------------------------------------------------------------
# 3) El directorio creado ("Nuevo"), es un paquete de R y un proyecto RStudio. 
#    Ahora se debeconvertir en un repositorio Git, usando la funcion use git(). 
#    Cabe recalcar que, use git() funciona en cualquier proyecto, 
#    independientemente de si es un paquete R.
# ------------------------------------------------------------------------------

usethis::use_git()

# ------------------------------------------------------------------------------
# 4) Escribir la primera función: Toda funcion esta en un archivo .R 
#    (Nombre_Funcion.R), y se va a encontrar almacenada en la carpeta R/ del 
#    proyecto. La funci ́on use_r() del paquete usethis,crea y/o abre un script 
#    en la carpeta R con el nombre que le asignemos. 
# ------------------------------------------------------------------------------

usethis::use_r("funcion_suma")


# Se nos abre un scrip en la carpeta R, llamado funcion_suma.R, y empezamos a 
# crear una función simple, de tal manera que tenga como entrada 2 numero y 
# retorne la suma de los mismos.

funcion_suma <- function(a,b){
  suma <- a + b
  return(suma)
}


# ------------------------------------------------------------------------------
# 5) Una vez, creada una funcion simple, debemos llamar a todas las funciones, 
#    para poner a "funcion_suma"  a dispocición la experimentación, utilizando 
#    la funcion "load_all('.')" del paquete devtools
# ------------------------------------------------------------------------------

devtools::load_all('.')

# Comprobación del funcionamiento de la funcion "funcion_suma"

funcion_suma(10,200)
funcion_suma(5,3)

# Tenemos evidencia empírica informal, que la función "funcion_suma()", funciona 
# correctamente. Pero para asegurar que todas las partes móviles del nuevo 
# paquete funcionan?.

# ------------------------------------------------------------------------------
# 6) Usar la función check() del paquete devtools es una forma conveniente de 
#    verificar que las partes móviles funcione sin salir de la sección R.
# ------------------------------------------------------------------------------

devtools::check()

```

<br>

# `r colorize("Tutorial","#1CA666")`


